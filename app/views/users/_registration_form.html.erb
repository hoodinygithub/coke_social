<% content_for :head do %>
  <%= javascript_include_tag 'registration' %>
<% end %>

<% content_for :javascript do %>
  <% if @user.errors.size > 0 %>
  $(document).ready(function(){
    field_with_errors = <%= @user.custom_errors.to_json %>;
    Base.account_settings.highlight_field_with_errors();
  });
  <% end %>
<% end %>

<% form_for @user, :html => { :multipart => true, :class => "account_settings" } do |f| %>
  <%= f.hidden_field :sso_facebook unless @user.sso_facebook.nil? %>

    <div class="form_row last">
      <%= f.label :gender, "<b>#{t("registration.you_are")}</b>" %>
      <%= f.radio_button :gender, "Female", :checked => true %><%= t("user.female") %>&nbsp;
      <%= f.radio_button :gender, "Male" %><%= t("user.male") %>
    </div><!--/end form_row -->

    <div class="form_row last">
      <%= f.label :name, "<b>#{t("registration.your_name")}</b>" %>
      <div class="grey_round_box">
        <%= f.text_field :name, :class => 'input full_width' %>
      </div>
    </div><!--/end form_row -->

    <div class="form_row last">
      <%= f.label :email, "<b>#{t("registration.email_address")}</b> <small class=\"grey\">#{t("registration.email_address_tip")}</small>" %>
      <div class="grey_round_box">
        <%= f.text_field :email, :class => 'input full_width' %>
      </div>
    </div><!--/end form_row -->

    <div class="form_row last">
      <%= f.label :slug, "<b>#{t("registration.your_profile_name")}</b> <small class=\"grey\">#{t("registration.your_profile_name_tip")}</small>" %>
      <div class="grey_round_box">
        <b>Coca-Cola.fm/</b><%= f.text_field :slug, :class => 'input half_width2' %>
      </div>
    </div><!--/end form_row -->

    <div class="form_row last left_side">
      <%= f.label :born_on, "<b>#{t("user.born_on")}</b>" %>
      <div class="grey_round_box">
        <%= f.date_select :born_on, :start_year => Time.now.year, :end_year => 1900, :use_month_numbers => true %>
      </div>
      <div class="clearer"></div>
    </div><!--/end form_row -->

    <div class="clearer"></div>

    <% if @user.sso_facebook.nil? %>
      <div class="form_row last">
        <%= f.label :password, "<b>#{t("registration.your_password")}</b>" %>
        <div class="grey_round_box">
          <%= f.password_field :password, :class => 'input full_width', :autocomplete => "off" %>
        </div>
      </div><!--/end form_row -->

      <div class="form_row last">
        <%= f.label :password_confirmation, "<b>#{t("registration.confirm_your_password")}</b>" %>
        <div class="grey_round_box">
          <%= f.password_field :password_confirmation, :class => 'input full_width', :autocomplete => "off" %>
        </div>
      </div><!--/end form_row -->
    <% end %>

    <br/>

    <div class="form_row last">
      <%= f.check_box :terms_and_privacy, :class => "privacy_check" %>

      <div class="privacy_text checkbox">
        <%= t("registration.terms_and_privacy",
            :terms_link => link_to(t("registration.terms_of_use"),
            terms_and_conditions_url),
            :privacy_link => link_to(t("registration.privacy_policy"), privacy_policy_url)) %>
      </div>
    </div>

    <div class="clearer"></div>

    <br/><br/>

    <div class="right_side">
      <big class="grey"><%= t("registration.thats_it") %></big> &nbsp; <a class="red_button valign_middle" onclick="$(this).closest('form').submit();"><span><span><%= t("registration.complete") %></span></span></a>
    </div>
<% end %><!--/end account_settings -->
